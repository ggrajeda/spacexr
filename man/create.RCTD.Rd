% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spacexr.R
\name{create.RCTD}
\alias{create.RCTD}
\title{\code{\linkS4class{RCTD}} object constructor}
\usage{
create.RCTD(
  spatialRNA,
  reference,
  max_cores = 4,
  gene_cutoff = 0.000125,
  fc_cutoff = 0.5,
  gene_cutoff_reg = 2e-04,
  fc_cutoff_reg = 0.75,
  UMI_min = 100,
  UMI_max = 2e+07,
  counts_MIN = 10,
  UMI_min_sigma = 300,
  class_df = NULL,
  CELL_MIN_INSTANCE = 25,
  cell_type_names = NULL,
  MAX_MULTI_TYPES = 4,
  keep_reference = FALSE,
  cell_type_profiles = NULL,
  CONFIDENCE_THRESHOLD = 5,
  DOUBLET_THRESHOLD = 20,
  test_mode = FALSE
)
}
\arguments{
\item{spatialRNA}{a \code{\linkS4class{SpatialRNA}} object containing spatial
transcriptomics data}

\item{reference}{a \code{\linkS4class{Reference}} object containing reference
RNA-seq data}

\item{max_cores}{numeric, maximum number of cores to use for parallel
processing (default: 4)}

\item{gene_cutoff}{numeric, minimum normalized gene expression for genes to
be included in the platform effect normalization step (default: 0.000125)}

\item{fc_cutoff}{numeric, minimum log-fold-change (across cell types) for
genes to be included in the platform effect normalization step (default:
0.5)}

\item{gene_cutoff_reg}{numeric, minimum normalized gene expression for genes
to be included in the RCTD step (default: 0.0002)}

\item{fc_cutoff_reg}{numeric, minimum log-fold-change (across cell types) for
genes to be included in the RCTD step (default: 0.75)}

\item{UMI_min}{numeric, minimum UMI count per pixel (default: 100)}

\item{UMI_max}{numeric, maximum UMI count per pixel (default: 20000000)}

\item{counts_MIN}{numeric, minimum total counts per pixel of genes used in
analysis (default: 10)}

\item{UMI_min_sigma}{numeric, minimum UMI count for pixels used in platform
effect normalization (default: 300)}

\item{class_df}{data frame mapping cell types to classes, optional. If
specified, RCTD will report confidence on the class level.}

\item{CELL_MIN_INSTANCE}{numeric, minimum number of cells required per cell
type (default: 25)}

\item{cell_type_names}{character vector of cell type names to include,
optional}

\item{MAX_MULTI_TYPES}{numeric, maximum number of cell types per pixel in
multi mode (default: 4)}

\item{keep_reference}{logical, whether to retain the full reference data in
the output object (default: FALSE)}

\item{cell_type_profiles}{matrix of precomputed cell type expression profiles
(genes by cell type), optional. If this option is used, gene names and cell
type names must be present in the profiles, and the reference will be
ignored.}

\item{CONFIDENCE_THRESHOLD}{numeric, minimum change in likelihood (compared
to other cell types) necessary to determine a cell type identity with
confidence (default: 5)}

\item{DOUBLET_THRESHOLD}{numeric, penalty weight of predicting a doublet
instead of a singlet for a pixel (default: 20)}

\item{test_mode}{logical, whether to run in test mode with reduced
computation (default: FALSE)}
}
\value{
\code{\linkS4class{RCTD}} object
}
\description{
Creates an RCTD configuration from a spatial transcriptomics dataset and a
reference dataset. This function performs initial preprocessing steps,
including identifying differentially expressed genes and normalizing for
platform effects. Users should subsequently pass this object to
\code{\link{run.RCTD}}.
}
\examples{
data(rctd_simulation)

# Create SpatialRNA and Reference objects
spatial_rna <- SpatialRNA(
    rctd_simulation$spatial_rna_coords,
    rctd_simulation$spatial_rna_counts
)
reference <- Reference(
    rctd_simulation$reference_counts,
    rctd_simulation$reference_cell_types
)

# Create RCTD object
rctd <- create.RCTD(spatial_rna, reference)

}
